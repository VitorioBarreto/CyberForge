<!-- Código desenvolvido por: Equipe CyberForge -->

<!DOCTYPE html>
<html lang="pt-br">
 
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="css/main_style.css" />
    <link href="css/main_fonte.css" rel="stylesheet">
    <link rel="icon" href="imagens/forja.png" type="image/png">
    <title>CYBERFORGE</title>
  </head>
  
  <body>
    <div class="container">
      <div class="forms-container">
        <div class="signin-signup">

          <!-- Etapa Login -->
          <form action="#" class="sign-in-form" id="login-form">
            <h2 class="title">CYBERFORGE</h2>

            <!-- Elemento para mensagem de erro -->
            <span id="login-error" style="color: red; display: none; font-size: 14px;"></span>

            <div class="input-field">
              <i class="fas fa-user"></i>
              <input type="text" id="login-usuario" placeholder="Usuário" required oninvalid="this.setCustomValidity('Por favor, insira um nome de usuário')" oninput="setCustomValidity('')" />
            </div>
            <div class="input-field">
              <i class="fas fa-lock"></i>
              <input type="password" id="login-senha" placeholder="Senha" required oninvalid="this.setCustomValidity('Por favor, insira sua senha')" oninput="setCustomValidity('')" />
            </div>
            <input type="submit" value="Logar" class="btn solid" />
            <p class="social-text">Nos siga em plataformas sociais</p>
            <div class="social-media">
              <a href="#" class="social-icon">
                <i class="fab fa-facebook-f"></i>
              </a>
              <a href="#" class="social-icon">
                <i class="fab fa-twitter"></i>
              </a>
              <a href="#" class="social-icon">
                <i class="fab fa-google"></i>
              </a>
              <a href="#" class="social-icon">
                <i class="fab fa-linkedin-in"></i>
              </a>
            </div>
          </form>

          <!-- Etapa Registro -->
          <form action="#" class="sign-up-form" id="register-form">
            <h2 class="title">CYBERFORGE</h2>
            <div class="input-field">
              <i class="fas fa-user"></i>
              <input type="text" id="registro-usuario" placeholder="Usuário" required oninvalid="this.setCustomValidity('Por favor, insira um nome de usuário')" oninput="setCustomValidity('')" />
            </div>
            <div class="input-field">
              <i class="fas fa-envelope"></i>
              <input type="email" id="registro-email" placeholder="E-mail" pattern=".+@.+\..+" oninvalid="this.setCustomValidity('Por favor, insira um e-mail válido com @')" oninput="setCustomValidity('')" required />
            </div>
            <div class="input-field">
              <i class="fas fa-lock"></i>
              <input type="password" id="registro-senha" placeholder="Senha" required oninvalid="this.setCustomValidity('Por favor, insira sua senha')" oninput="setCustomValidity('')" />
            </div>
            <input type="submit" class="btn" value="Registrar"/>
            <p class="social-text">Nos siga em plataformas sociais</p>
            <div class="social-media">
              <a href="#" class="social-icon">
                <i class="fab fa-facebook-f"></i>
              </a>
              <a href="#" class="social-icon">
                <i class="fab fa-twitter"></i>
              </a>
              <a href="#" class="social-icon">
                <i class="fab fa-google"></i>
              </a>
              <a href="#" class="social-icon">
                <i class="fab fa-linkedin-in"></i>
              </a>
            </div>
          </form>
        </div>
      </div>

      <!-- Slot Registro e Slot Login -->
      <div class="panels-container">
        <div class="panel left-panel">
          <div class="content">
            <aside>
              <h2><span>Monte seu PC agora</span></h2>
              <h2>no CyberForge</h2>
              <p>
                Descubra as melhores peças de computador com preços imbatíveis e qualidade superior. Nossa plataforma torna a busca por componentes modernos mais fácil, auxiliando você a tomar as melhores decisões de forma rápida e eficaz.
              </p>
              <button class="btn transparent" id="sign-up-btn">
                Registre-se
              </button>
            </aside>
          </div>
          <img src="imagens/logo_login.svg" class="image" alt="" />
        </div>
        <div class="panel right-panel">
          <div class="content">
            <aside>
              <h2><span>Monte seu PC agora</span></h2>
              <h2>no CyberForge</h2>
              <p>
                Encontre as melhores peças de computador com o melhor preço e qualidade. Nossa plataforma facilita a busca por componentes atuais, ajudando você a fazer as melhores escolhas de forma rápida e eficiente.
              </p>
              <button class="btn transparent" id="sign-in-btn">
                Entrar
              </button>
            </aside>
          </div>
          <img src="imagens/logo_register.svg" class="image" alt="" />
        </div>
      </div>
    </div> 

    <script>
      // Referências aos botões e slots
      const signUpButton = document.getElementById('sign-up-btn');
      const signInButton = document.getElementById('sign-in-btn');
      const loginForm = document.getElementById('login-form');
      const registerForm = document.getElementById('register-form');
    
      // Funções do Registro: Usuário, e-mail e senha
      registerForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const usuario = document.getElementById('registro-usuario').value;
        const email = document.getElementById('registro-email').value;
        const senha = document.getElementById('registro-senha').value;
        
        // Verificando se o usuário já existe
        const storedUsuario = localStorage.getItem('usuario');

        if (storedUsuario === usuario) {
        alert('O usuário já foi usado para outro cadastro. Por gentileza, escolha outro nome de usuário.');
        // Limpar os campos do formulário
        document.getElementById('registro-usuario').value = '';
        document.getElementById('registro-email').value = '';
        document.getElementById('registro-senha').value = '';
        return; // Sair da função sem prosseguir com o registro do novo usuário
        }

        // Salvando dados no LocalStorage ( Navegador do usuário )
        localStorage.setItem('usuario', usuario);
        localStorage.setItem('email', email);
        localStorage.setItem('senha', senha);
        
        // Limpar os campos do slot da vez - Registro
        document.getElementById('registro-usuario').value = '';
        document.getElementById('registro-email').value = '';
        document.getElementById('registro-senha').value = '';
        document.getElementById('sign-in-btn').click();
      });
    
      // Funções de Login: Usuário e senha
      loginForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const loginUsuario = document.getElementById('login-usuario').value;
        const loginSenha = document.getElementById('login-senha').value;
    
        // Limpar os campos do slot da vez - Login
        document.getElementById('login-usuario').value = '';
        document.getElementById('login-senha').value = '';
    
        // Verificar os dados no LocalStorage ( Navegador do usuário )
        const storedUsuario = localStorage.getItem('usuario');
        const storedSenha = localStorage.getItem('senha');
        const loginError = document.getElementById('login-error');
    
        if (loginUsuario === storedUsuario && loginSenha === storedSenha) {
          loginError.style.display = 'none'; 
          window.location.href = './Tela Inicial/main.html'; 
        } else {
          loginError.textContent = 'Usuário ou senha incorretos'; 
          loginError.style.display = 'block'; 
        }
      });
    
      // Alternar entre as telas
      signUpButton.addEventListener('click', () => {
        document.querySelector('.container').classList.add('sign-up-mode');
      });
    
      signInButton.addEventListener('click', () => {
        document.querySelector('.container').classList.remove('sign-up-mode');
      });

    </script>
  </body>
</html>